

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>Students Organizer</title>
            </f:facet>
        </h:head>

        <h:body style="background-color: activecaption">

            <h1 align="left" > 
                <h:graphicImage  value="Image/logo.png" width="150" height="150" /> 
                <h:graphicImage   value="Image/logo1.png" width="150" height="150" style="alignment-adjust: central" /> 
                <h1 align="center" style="background-color: #d5da32">Students Organizer</h1>
            </h1>

            <ui:include src="/WEB-INF/dialogs/add-student.xhtml" />
            <ui:include src="/WEB-INF/dialogs/add-event.xhtml" />
            <ui:include src="/WEB-INF/dialogs/add-studentEvent.xhtml" />
            <ui:include src="/WEB-INF/dialogs/delete-student.xhtml" />
            <ui:include src="/WEB-INF/dialogs/view-events.xhtml" />

            <h:form>
                <h:panelGrid  columns="2" >
                    <p:spacer/>
                    <p:spacer/>
                    <p:spacer/>
                    <p:spacer/>
                    <img src="Image/Student-3-icon.png" width="50" height="55" alt="Student-3-icon"/>
                    <p:commandButton   value="New Participant" onclick="PF('dialogS').show();"></p:commandButton>
                    <img align="" src="Image/Calendar-icon.png" width="48" height="48" alt="Calendar-icon"/>
                    <p:commandButton  value="New Event" onclick="PF('dialogE').show();"/>
                    <p:spacer/>
                    <p:commandButton  value="View Events" onclick="PF('dialogViewEvents').show();"/>
                    <p:spacer/>
                </h:panelGrid>
            </h:form>





            <h:form id="tableForm"  prependId="false">
                <p:growl id="growl" life="2000" />
                <h1 align="center">Participants</h1>

                <p:dataTable id="tbl" var="student" value="#{studentView.students}" rows="10"
                             paginator="true"
                             selection="#{studentView.student}" 
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
                             rowsPerPageTemplate="5,10,15" editable="true" editMode="cell">

                    <f:facet name="{Exporters}">
                        <h:commandLink>
                            <p:graphicImage  style="vertical-align: middle; " value="/Image/PDF-icon.png" width="25"/>
                            <p:dataExporter type="pdf" target="tbl" fileName="cars" pageOnly="true" />
                        </h:commandLink>
                    </f:facet>

                    <p:ajax event="cellEdit" listener="#{studentView.onCellEdit}" update=" growl"  />

                    <p:column headerText="First Name" filterBy="#{student.firstName}">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.firstName}"  /></f:facet>
                            <f:facet name="input"><p:inputText value="#{student.firstName}" style="width:100%"/></f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Last Name" filterBy="#{student.lastname}">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.lastname}"  /></f:facet>
                            <f:facet name="input"><p:inputText value="#{student.lastname}" style="width:100%"/></f:facet>
                        </p:cellEditor>

                    </p:column>

                    <p:column headerText="Gender" sortBy="#{student.gender}" >           
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.gender}"/></f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu  value="#{student.gender}" style="width:125px">
                                    <f:selectItem itemLabel="Male" itemValue="MALE" />
                                    <f:selectItem itemLabel="Female" itemValue="FEMALE" />
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Birth Day" sortBy="#{student.birthDay}">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.birthDay}"  /></f:facet>
                            <f:facet name="input">
                                <p:calendar value="#{student.birthDay}" pattern="dd/MM/yyyy " navigator="true" showOn="button" />
                            </f:facet>
                        </p:cellEditor>

                    </p:column>

                    <p:column headerText="Email">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.email}"  /></f:facet>
                            <f:facet name="input"><p:inputText value="#{student.email}" style="width:100%"/></f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Phone Number" filterBy="#{student.phoneNumber}">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.phoneNumber}"  /></f:facet>
                            <f:facet name="input"><p:inputText value="#{student.phoneNumber}" style="width:100%"/></f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Faculty">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.faculty}"  /></f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu value="#{student.faculty}"  style="width:150px">
                                    <f:selectItem itemLabel="MATE INFO" itemValue="MATE_INFO" />
                                    <f:selectItem itemLabel="AUTOMATICA" itemValue="AUTOMATICA" />
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Faculty Start Year" sortBy="#{student.facultystartYear}">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{student.facultystartYear}"  /></f:facet>
                            <f:facet name="input"><p:inputText value="#{student.facultystartYear}" style="width:100%"/></f:facet>
                        </p:cellEditor>
                    </p:column>
                    
                    <p:column headerText="Event" >
                        <h:outputText value="#{studentView.getEventsAsString(student)}"/>
                    </p:column>

                    <p:column headerText="Actions" exportable="false" >

                        <p:commandButton icon="ui-icon-trash" onclick="PF('deleteStudent').show();" update="tableForm">
                            <f:setPropertyActionListener value="#{student}" target="#{studentView.student}"/>
                        </p:commandButton>

                        <p:commandButton   icon="ui-icon-circle-plus" onclick="PF('dialogSE').show();" update=":eventAddStudentForm" >
                            <f:setPropertyActionListener value="#{student}" target="#{studentView.student}"/>
                        </p:commandButton>
                        
                    </p:column> 

                </p:dataTable>

            </h:form>
            
            


        </h:body>

    </f:view>
</html>

